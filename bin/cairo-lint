#!/usr/bin/env bash

set -euo pipefail

CHECK_ONLY=false

while [[ $# -gt 0 ]]; do
    case "$1" in
        --check-only)
            CHECK_ONLY=true
            ;;
        --help)
            echo "Usage: bin/cairo-lint [--check-only]"
            exit 0
            ;;
        *)
            echo "Unknown option: $1"
            exit 1
            ;;
    esac
    shift
 done

if [ "$CHECK_ONLY" = true ]; then
    exec bazelisk test //:cairo_lint
fi

exec bazelisk run //:lint_fix -- --cairo
